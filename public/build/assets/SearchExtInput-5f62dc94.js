import{r as o,j as e,g as w}from"./app-fdfe6fa4.js";import{I}from"./InputSwitch-4aea0b21.js";import"./iconify-a2e39cc2.js";const T=({currentLesson:u=1,currentDay:c=1,currentWeek:r=1,selectedPGroup:f,timetable:d,weekDefault:p,isTeacher:g=!1})=>{const[m,j]=o.useState(0);o.useEffect(()=>{j(p)},[p]);const i=l=>{j(l)},v=l=>{const n=new Date().getTimezoneOffset(),x=300+(l-1)*110-n,s=x+95,t=h=>{var b=Math.floor(h/60),h=h%60;return b+":"+(h<10?"0"+h:h)};return`${t(x)} - ${t(s)}`};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex content-center items-center gap-4 justify-center mb-4",children:[e.jsx("span",{className:"font-medium text-xl",children:"Week 1"}),e.jsx(I,{initialValue:m,onChange:i}),e.jsx("span",{className:"font-medium text-xl",children:"Week 2"})]}),e.jsxs("table",{className:"timetable",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Пн","Вт","Ср","Чт","Пт","Сб"].map((l,n)=>e.jsx("th",{className:`${n+1===c&&m+1===r?"day-active":""}`,children:l},n))})}),e.jsx("tbody",{children:[1,2,3,4,5,6,7].map(l=>e.jsx("tr",{children:[1,2,3,4,5,6].map((n,x)=>e.jsxs("td",{className:`${x+1===c&&m+1===r?"day-active":""}`,children:[n===1?e.jsx("div",{className:"time",children:v(l)}):e.jsx("div",{className:"time inactive"}),d.map((s,t)=>e.jsx("div",{children:(g||s.pgroup===0||s.pgroup==f)&&s.week===m+1&&s.day===n&&s.lesson===l?e.jsxs("div",{className:"card-default relative overflow-hidden lesson",children:[e.jsx("div",{className:`lesson-type type-${s.type} ${s.week===r&&s.day===c&&s.lesson===u?"active":""}`}),e.jsx("span",{className:"text-xl font-semibold",children:s.name})]}):null},t))]},n))},l))})]})]})},W=T,E=({selectedDay:u,onSelectDay:c})=>{const r=["Пн","Вт","Ср","Чт","Пт","Сб"];return e.jsx("div",{className:"day-selector",children:r.map((f,d)=>e.jsx("span",{className:`font-semibold ${u===d+1?"day-active":""}`,onClick:()=>c(d+1),children:f},d))})},M=({selectedWeek:u,onSelectWeek:c})=>e.jsxs("div",{className:"week-selector",children:[e.jsx("span",{className:`font-semibold ${u===0?"week-active":""}`,onClick:()=>c(0),children:"Тиждень 1"}),e.jsx("span",{className:`font-semibold ${u===1?"week-active":""}`,onClick:()=>c(1),children:"Тиждень 2"})]}),O=({currentLesson:u=1,currentDay:c=1,currentWeek:r=1,selectedPGroup:f,timetable:d,weekDefault:p,isTeacher:g=!1})=>{const[m,j]=o.useState(p),[i,v]=o.useState(c);o.useEffect(()=>{j(p),v(c)},[p,c]);const l=s=>{j(s)},n=s=>{const t=new Date().getTimezoneOffset(),N=300+(s-1)*110-t,b=N+95,h=a=>{var $=Math.floor(a/60),a=a%60;return $+":"+(a<10?"0"+a:a)};return`${h(N)} - ${h(b)}`},x=s=>{v(s)};return e.jsxs("div",{className:"timetable-container",children:[e.jsxs("table",{className:"timetable",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{className:`text-xl ${c===i&&m+1===r?"day-active":""}`,children:["Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"][i-1]})})}),e.jsx("tbody",{children:[1,2,3,4,5,6,7].map(s=>e.jsx("tr",{children:e.jsxs("td",{className:`${i===c&&m+1===r?"day-active":""}`,children:[e.jsx("div",{className:"time",children:e.jsx("span",{children:n(s)})}),d.map((t,N)=>e.jsx("div",{children:(g||t.pgroup===0||t.pgroup==f)&&t.week===m+1&&t.day===i&&t.lesson===s?e.jsxs("div",{className:"card-default relative overflow-hidden lesson",children:[e.jsx("div",{className:`lesson-type type-${t.type} ${t.week===r&&t.day===c&&t.lesson===u?"active":""}`}),e.jsx("span",{className:"text-xl font-semibold",children:t.name})]}):null},N))]})},s))})]}),e.jsxs("div",{className:"selectors-bottom",children:[e.jsx(M,{selectedWeek:m,onSelectWeek:l}),e.jsx("div",{className:"vertical-line"}),e.jsx(E,{selectedDay:i,onSelectDay:x})]})]})},z=O,V=o.forwardRef(function({type:c="search",className:r="",isFocused:f=!1,suggestionsEndpoint:d,onSearch:p,defaultValue:g="",...m},j){const i=j||o.useRef(),[v,l]=o.useState(g),[n,x]=o.useState([]),[s,t]=o.useState(!1);o.useEffect(()=>{w.get(`${d}`).then(a=>{x(a.data)}).catch(a=>{console.error("Error fetching suggestions:",a)})},[]),o.useEffect(()=>{f&&(i.current.focus(),t(!0))},[f]);const N=()=>{setTimeout(()=>{t(!1)},90)},b=()=>{t(!0)},h=()=>{i.current.focus(),t(!0)},C=a=>{const S=a.target.value;l(S),d&&w.get(`${d}/${S}`).then(k=>{x(k.data)}).catch(k=>{console.error("Error fetching suggestions:",k)})},$=a=>{a&&(l(a),p(a),i.current.blur())};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`form-search ${r}`,onClick:h,children:[e.jsx("input",{...m,type:c,ref:i,value:v,onChange:C,onBlur:N,onFocus:b}),s&&n.length!==0&&e.jsx("ul",{className:"options",style:{maxHeight:n.length>10?"200px":"auto",overflowY:"auto"},children:Object.keys(n).map(a=>e.jsx("li",{className:"option",onClick:()=>$(n[a]),children:n[a]},a))})]})})});export{V as S,W as T,z as a};
