import{r,j as a,a as k,f as N}from"./app-86cdc5d9.js";import{A as C}from"./AuthenticatedLayout-f70458d9.js";import{S as L,T as M,a as H}from"./SearchExtInput-3653a780.js";import"./ApplicationLogo-09209595.js";import"./Dropdown-2c5c0073.js";import"./transition-0b49eaf2.js";import"./InputSwitch-e0d06f97.js";import"./iconify-f749bbdc.js";function _({auth:x,teacher:g,startWeek:f}){const[l,w]=r.useState([]),[c,v]=r.useState(g),[o,j]=r.useState(0),[u,y]=r.useState(0),[m,D]=r.useState(0),[d,T]=r.useState(0),[I,S]=r.useState("");async function b(e){if(e!=""){const t=await N.get(`/api/v1/teacher/${e}`);t.data.data.timetables&&w(t.data.data.timetables)}}const h=()=>{var e=new Date(new Date().toLocaleString("en",{timeZone:"Europe/Rome"})),t=e.getDay(),s=e.getHours()*60+e.getMinutes(),n=0;if(s>525&&s<1275)for(s=s-525,n++;s>0;)s=s-110,n++;S(e.getHours()+":"+e.getMinutes()),e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var p=new Date(e.getFullYear(),0,4),i=1+Math.round(((e.getTime()-p.getTime())/864e5-3+(p.getDay()+6)%7)/7);i=((i+f)%2==(t==0)?1:0)+1,j(i-1),y(i),D(t==0?t+1:t),T(n)};r.useEffect(()=>{b(c),h()},[c]),r.useEffect(()=>{const e=setInterval(async()=>await h(),2e4);return function(){clearInterval(e)}},[]);const E=e=>{const t=new URL(window.location),s="teacher";v(e),t.searchParams.has(s)?t.searchParams.set(s,e):t.searchParams.append(s,e),window.history.pushState({},"",t);const n=new Event("urlchange");window.dispatchEvent(n)};return a.jsxs(C,{user:x.user,children:[a.jsx(k,{title:"Timetable"}),a.jsxs("div",{className:"bg-white",children:[a.jsx("div",{className:"flex justify-between px-6 py-2",children:a.jsx("h1",{className:"text-2xl font-semibold",children:"Розклад викладача"})}),a.jsx("div",{className:"flex flex-wrap justify-center items-center gap-2 lg:gap-6 px-6 py-4 text-gray-900 w-full",children:a.jsx("div",{className:"min-w-[190px] max-w-[260px] grid lg:gap-3",children:a.jsx(L,{suggestionsEndpoint:"/api/v1/search/teacher",onSearch:E,defaultValue:c,isFocused:!1})})}),a.jsx("div",{className:"grid px-6 text-gray-900 w-full gap-12 max-xl:hidden",children:a.jsx(M,{currentLesson:d,currentDay:m,currentWeek:u,timetable:l,weekDefault:o,isTeacher:!0})}),a.jsx("div",{className:"grid px-6 text-gray-900 w-full gap-12 xl:hidden",children:a.jsx(H,{currentLesson:d,currentDay:m,currentWeek:u,timetable:l,weekDefault:o,isTeacher:!0})})]})]})}export{_ as default};
