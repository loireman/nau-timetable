import{r as o,j as s,g as y}from"./app-45c0dd56.js";import{I as z}from"./InputSwitch-44c0a65f.js";import{M as R}from"./Modal-783a3cd0.js";import{I as B}from"./iconify-aa030784.js";const V=({currentLesson:f=1,currentDay:t=1,currentWeek:m=1,selectedPGroup:N,timetable:e,weekDefault:v,isTeacher:$=!1})=>{var E,T,I,w,c,S;const[x,b]=o.useState(0),[h,C]=o.useState(!1),[r,j]=o.useState(null);o.useEffect(()=>{b(v)},[v]);const d=n=>{b(n)},F=n=>{const i=new Date().getTimezoneOffset(),u=300+(n-1)*110-i,l=u+95,a=p=>{var L=Math.floor(p/60),p=p%60;return L+":"+(p<10?"0"+p:p)};return`${a(u)} - ${a(l)}`},g=n=>{C(!0),j(n)},M=()=>{C(!1)};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex content-center items-center gap-4 justify-center mb-4",children:[s.jsx("span",{className:"font-medium text-xl",children:"Week 1"}),s.jsx(z,{initialValue:x,onChange:d}),s.jsx("span",{className:"font-medium text-xl",children:"Week 2"})]}),s.jsxs("table",{className:"timetable",children:[s.jsx("thead",{children:s.jsx("tr",{children:["Пн","Вт","Ср","Чт","Пт","Сб"].map((n,i)=>s.jsx("th",{className:`${i+1===t&&x+1===m?"day-active":""}`,children:n},i))})}),s.jsx("tbody",{children:[1,2,3,4,5,6,7].map(n=>s.jsx("tr",{children:[1,2,3,4,5,6].map((i,u)=>s.jsxs("td",{className:`${u+1===t&&x+1===m?"day-active":""}`,children:[i===1?s.jsx("div",{className:"time",children:F(n)}):s.jsx("div",{className:"time inactive"}),e.map((l,a)=>s.jsx("div",{children:($||l.pgroup===0||l.pgroup==N)&&l.week===x+1&&l.day===i&&l.lesson===n?s.jsxs("div",{className:"card-default relative overflow-hidden lesson",onClick:()=>g(a),children:[s.jsx("div",{className:`lesson-type type-${l.type} ${l.week===m&&l.day===t&&l.lesson===f?"active":""}`}),s.jsx("span",{className:"text-xl font-semibold",children:l.name})]}):null},a))]},i))},n))})]}),s.jsx(R,{show:h,onClose:M,children:e[r]&&s.jsxs("div",{className:"card-modal",children:[s.jsx("button",{className:"fixed right-4",onClick:M,children:s.jsx(B,{icon:"mdi:close"})}),s.jsx("div",{children:s.jsx("h5",{className:"form-text font-semibold",children:(E=e[r])==null?void 0:E.name})}),s.jsxs("div",{children:[s.jsx("span",{className:"form-label",children:"Тип"}),s.jsx("h5",{className:"form-text",children:["Лекція","Практична","Лабораторна"].map((n,i)=>{var u;return s.jsx("div",{children:i==((u=e[r])==null?void 0:u.type)?n:null},i)})})]}),$==!0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"form-label",children:"Група"}),s.jsx("h5",{className:"form-text",children:(T=e[r])==null?void 0:T.group})]}),((I=e[r])==null?void 0:I.type)==2?s.jsxs("div",{children:[s.jsx("span",{className:"form-label",children:"Підрупа"}),s.jsx("h5",{className:"form-text",children:(w=e[r])==null?void 0:w.pgroup})]}):null]}):s.jsxs("div",{children:[s.jsx("span",{className:"form-label",children:"Викладач"}),s.jsx("h5",{className:"form-text",children:((c=e[r])==null?void 0:c.teacher)??s.jsx("small",{children:"Не визначений/а"})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"form-label",children:"Аудиторія"}),s.jsx("h5",{className:"form-text",children:((S=e[r])==null?void 0:S.auditory)??s.jsx("small",{children:"Не визначена"})})]})]})})]})},K=V,q=({selectedDay:f,onSelectDay:t})=>{const m=["Пн","Вт","Ср","Чт","Пт","Сб"];return s.jsx("div",{className:"day-selector",children:m.map((N,e)=>s.jsx("span",{className:`font-semibold ${f===e+1?"day-active":""}`,onClick:()=>t(e+1),children:N},e))})},H=({selectedWeek:f,onSelectWeek:t})=>s.jsxs("div",{className:"week-selector",children:[s.jsx("span",{className:`font-semibold ${f===0?"week-active":""}`,onClick:()=>t(0),children:"Тиждень 1"}),s.jsx("span",{className:`font-semibold ${f===1?"week-active":""}`,onClick:()=>t(1),children:"Тиждень 2"})]}),Q=({currentLesson:f=1,currentDay:t=1,currentWeek:m=1,selectedPGroup:N,timetable:e,weekDefault:v,isTeacher:$=!1})=>{var w,c,S,n,i,u;const[x,b]=o.useState(v),[h,C]=o.useState(t),[r,j]=o.useState(!1),[d,F]=o.useState(null);o.useEffect(()=>{b(v),C(t)},[v,t]);const g=l=>{b(l)},M=l=>{const a=new Date().getTimezoneOffset(),k=300+(l-1)*110-a,L=k+95,p=O=>{var W=Math.floor(O/60),O=O%60;return W+":"+(O<10?"0"+O:O)};return`${p(k)} - ${p(L)}`},E=l=>{C(l)},T=l=>{j(!0),F(l)},I=()=>{j(!1)};return s.jsxs("div",{className:"timetable-container",children:[s.jsxs("table",{className:"timetable",children:[s.jsx("thead",{children:s.jsx("tr",{children:s.jsx("th",{className:`text-xl ${t===h&&x+1===m?"day-active":""}`,children:["Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"][h-1]})})}),s.jsx("tbody",{children:[1,2,3,4,5,6,7].map(l=>s.jsx("tr",{children:s.jsxs("td",{className:`${h===t&&x+1===m?"day-active":""}`,children:[s.jsx("div",{className:"time",children:s.jsx("span",{children:M(l)})}),e.map((a,k)=>s.jsx("div",{children:($||a.pgroup===0||a.pgroup==N)&&a.week===x+1&&a.day===h&&a.lesson===l?s.jsxs("div",{className:"card-default relative overflow-hidden lesson",onClick:()=>T(k),children:[s.jsx("div",{className:`lesson-type type-${a.type} ${a.week===m&&a.day===t&&a.lesson===f?"active":""}`}),s.jsx("span",{className:"text-xl font-semibold",children:a.name})]}):null},k))]})},l))})]}),s.jsx(R,{show:r,onClose:I,children:e[d]&&s.jsxs("div",{className:"card-modal",children:[s.jsx("button",{className:"fixed right-4",onClick:I,children:s.jsx(B,{icon:"mdi:close"})}),s.jsx("div",{children:s.jsx("h5",{className:"form-text font-semibold",children:(w=e[d])==null?void 0:w.name})}),s.jsxs("div",{children:[s.jsx("span",{className:"form-label",children:"Тип"}),s.jsx("h5",{className:"form-text",children:["Лекція","Практична","Лабораторна"].map((l,a)=>{var k;return s.jsx("div",{children:a==((k=e[d])==null?void 0:k.type)?l:null},a)})})]}),$==!0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"form-label",children:"Група"}),s.jsx("h5",{className:"form-text",children:(c=e[d])==null?void 0:c.group})]}),((S=e[d])==null?void 0:S.type)==2?s.jsxs("div",{children:[s.jsx("span",{className:"form-label",children:"Підрупа"}),s.jsx("h5",{className:"form-text",children:(n=e[d])==null?void 0:n.pgroup})]}):null]}):s.jsxs("div",{children:[s.jsx("span",{className:"form-label",children:"Викладач"}),s.jsx("h5",{className:"form-text",children:((i=e[d])==null?void 0:i.teacher)??s.jsx("small",{children:"Не визначений/а"})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"form-label",children:"Аудиторія"}),s.jsx("h5",{className:"form-text",children:((u=e[d])==null?void 0:u.auditory)??s.jsx("small",{children:"Не визначена"})})]})]})}),s.jsxs("div",{className:"selectors-bottom",children:[s.jsx(H,{selectedWeek:x,onSelectWeek:g}),s.jsx("div",{className:"vertical-line"}),s.jsx(q,{selectedDay:h,onSelectDay:E})]})]})},P=Q,U=o.forwardRef(function({type:t="search",className:m="",isFocused:N=!1,suggestionsEndpoint:e,onSearch:v,defaultValue:$="",...x},b){const h=b||o.useRef(),[C,r]=o.useState($),[j,d]=o.useState([]),[F,g]=o.useState(!1);o.useEffect(()=>{y.get(`${e}`).then(c=>{d(c.data)}).catch(c=>{console.error("Error fetching suggestions:",c)})},[]),o.useEffect(()=>{N&&(h.current.focus(),g(!0))},[N]);const M=()=>{setTimeout(()=>{g(!1)},90)},E=()=>{g(!0)},T=()=>{h.current.focus(),g(!0)},I=c=>{const S=c.target.value;r(S),e&&y.get(`${e}/${S}`).then(n=>{d(n.data)}).catch(n=>{console.error("Error fetching suggestions:",n)})},w=c=>{c&&(r(c),v(c),h.current.blur())};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:`form-search ${m}`,onClick:T,children:[s.jsx("input",{...x,type:t,ref:h,value:C,onChange:I,onBlur:M,onFocus:E}),F&&j.length!==0&&s.jsx("ul",{className:"options",style:{maxHeight:j.length>10?"200px":"auto",overflowY:"auto"},children:Object.keys(j).map(c=>s.jsx("li",{className:"option",onClick:()=>w(j[c]),children:j[c]},c))})]})})});export{U as S,K as T,P as a};
