import{r,j as e,a as w,Q as a}from"./app-39103341.js";import{P as c}from"./PrimaryButton-060729d5.js";import{T as D}from"./TextInput-cc199105.js";import{A as L}from"./AdminLayout-50676e53.js";import{I as l}from"./iconify-f720f908.js";import"./ApplicationLogo-6719680e.js";import"./Dropdown-477af93e.js";import"./transition-6017fa6d.js";import"./Modal-033f7530.js";function B({auth:f}){const[o,g]=r.useState(""),[n,j]=r.useState([]),[i,d]=r.useState(!1),[p,m]=r.useState(!1),[u,x]=r.useState(!1),N=async()=>{try{x(!0);const s=await axios.post(route("api.parse.timetable"),{group:o});a.success("Розклад спизджено")}catch(s){a.error(s.response.data.error)}finally{x(!1)}},b=async()=>{try{d(!0),(await axios.post(route("api.parse.dep"))).data.filter(t=>!n.includes(t)).forEach(async t=>{const v={name:t,short:t,chief:"-"};response=await axios.post(route("department.store"),v)}),a.success("Факультети спизджено")}catch(s){a.error(s),a.error(s.response.data.error)}finally{h(),d(!1)}},y=async()=>{try{m(!0);const s=await axios.post(route("api.parse.group"),{group:o});a.success("Групу спизджено")}catch(s){a.error(s),a.error(s.response.data.error)}finally{m(!1)}},h=async()=>{try{const s=await axios.get(route("api.fetch.dep"));j(s.data)}catch(s){a.error(s.response.data.error)}};return r.useEffect(()=>{h()},[]),e.jsxs(L,{user:f.user,header:e.jsx("h2",{className:"font-medium text-lg lg:text-2xl",children:"Dashboard"}),children:[e.jsx(w,{title:"Dashboard"}),e.jsx("div",{className:"pb-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{children:[e.jsx("div",{className:"p-6",children:"Ультимативний пиздер розкладу нау"}),e.jsxs("div",{className:"admin-list",children:[e.jsxs("div",{className:"card-default",children:[e.jsxs("h2",{className:"text-lg mb-1",children:["Кількість факультетів: ",n.length]}),e.jsx(c,{disabled:i,onClick:()=>b(),children:i?e.jsx(l,{icon:"svg-spinners:bars-scale",className:"w-6 h-6 mx-auto"}):e.jsx(e.Fragment,{children:"Спиздить факультети"})})]}),e.jsxs("div",{className:"card-default",children:[e.jsxs("h2",{className:"text-lg mb-1",children:["Назва групи,"," ",e.jsx("a",{href:"https://portal.nau.edu.ua/schedule/group/list",className:"text-blue-600 underline",target:"_blank",children:"переглянути тут"})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:grid lg:grid-cols-3",children:[e.jsx(D,{className:"col-span-1",name:"group",type:"text",label:"Group",value:o,onChange:s=>g(s.target.value)}),e.jsx(c,{className:"col-span-1",disabled:p,onClick:()=>y(),children:p?e.jsx(l,{icon:"svg-spinners:bars-scale",className:"w-6 h-6 mx-auto"}):e.jsx(e.Fragment,{children:"Спиздить групу"})}),e.jsx(c,{className:"col-span-1",disabled:u,onClick:()=>N(),children:u?e.jsx(l,{icon:"svg-spinners:bars-scale",className:"w-6 h-6 mx-auto"}):e.jsx(e.Fragment,{children:"Спиздить розклад"})})]})]})]})]})})})]})}export{B as default};
