import{r,Q as k,j as e,a as O}from"./app-850d2a0e.js";import{A}from"./AdminLayout-66ff5ea5.js";import{D as c,P as S}from"./DateFormatted-819164b7.js";import{I as m}from"./iconify-bf2006e7.js";import{M as w}from"./Modal-010c3804.js";import"./ApplicationLogo-112399fd.js";import"./Dropdown-84783e80.js";import"./transition-9b158939.js";import"./PrimaryButton-904b78d2.js";function Z({auth:y,groups:a,can:l,message:n,error:i}){var h,j,u,p,f,N,b,v;function E(t){if(confirm("Are you sure you want to delete?")){const d=document.querySelector('meta[name="csrf-token"]').content;fetch(route("group.destroy",t),{method:"DELETE",headers:{"X-CSRF-TOKEN":d}}).then(()=>{window.location.reload()})}}const[D,o]=r.useState(!1),[s,C]=r.useState(null),I=t=>{o(!0),C(t)},x=()=>{o(!1)};return r.useEffect(()=>{n&&k.success(n),i&&k.error(i)},[n,i]),e.jsxs(A,{user:y.user,header:e.jsx("h2",{className:"font-medium text-lg lg:text-2xl",children:"Groups"}),addElement:l.create,searchField:!0,sortOptions:[{key:"id",label:"Id (Ascending)"},{key:"-id",label:"Id (Descending)"},{key:"name",label:"Name (A to Z)"},{key:"-name",label:"Name (Z to A)"}],filterOptions:[{key:"group",value:null},{key:"substream",value:null}],children:[e.jsx(O,{title:"Groups"}),e.jsx("div",{className:"pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"admin-list",children:a.data.map((t,d)=>e.jsxs("div",{className:"card-default",onClick:()=>I(d),children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("h5",{className:"form-text",children:t.name}),t.stream&&e.jsxs("div",{className:"chip",children:["Спец. ",t.stream.name]}),t.substream&&e.jsxs("div",{className:"chip",children:["Поток ",t.substream.name]})]}),e.jsxs("span",{children:["Updated at"," ",e.jsx(c,{inputDate:t.updated_at})]})]},d))}),e.jsx(w,{show:D,onClose:x,children:a.data[s]&&e.jsxs("div",{className:"card-modal",children:[e.jsx("button",{className:"fixed right-4",onClick:x,children:e.jsx(m,{icon:"mdi:close"})}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Name"}),e.jsx("h5",{className:"form-text",children:(h=a.data[s])==null?void 0:h.name})]}),(j=a.data[s])!=null&&j.stream?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"form-label",children:"Stream"}),e.jsxs("h5",{className:"form-text",children:[(u=a.data[s])==null?void 0:u.stream.name,e.jsxs("small",{children:["(",(p=a.data[s])==null?void 0:p.stream.course,"к)"]})]})]}):null,(f=a.data[s])!=null&&f.substream?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"form-label",children:"Sub stream"}),e.jsx("h5",{className:"form-text",children:(N=a.data[s])==null?void 0:N.substream.name})]}):null,e.jsxs("div",{className:"grid gap-1 m-auto",children:[e.jsxs("span",{children:["Created at"," ",e.jsx(c,{inputDate:(b=a.data[s])==null?void 0:b.created_at})]}),e.jsxs("span",{children:["Updated at"," ",e.jsx(c,{inputDate:(v=a.data[s])==null?void 0:v.updated_at})]})]}),l.edit&&e.jsxs("a",{className:"admin-edit",href:route("group.edit",a.data[s].id),children:["Edit ",e.jsx(m,{icon:"mdi:pencil"})]}),l.delete&&e.jsxs("button",{className:"admin-delete",onClick:()=>E(a.data[s].id),children:["Delete",e.jsx(m,{icon:"mdi:trash"})]})]})}),e.jsx(S,{pageContent:a})]})})]})}export{Z as default};
