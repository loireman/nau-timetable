import{r as c,Q as E,j as a,a as e,b as w,F as D}from"./app-9c633b3e.js";import{A as F,I as m}from"./AdminLayout-ec2ba906.js";import{D as o,P as M}from"./DateFormatted-0cb0498e.js";import{M as j}from"./Modal-c562a0ec.js";import"./ApplicationLogo-8482edb2.js";import"./Dropdown-77418e2c.js";import"./transition-ad9216bd.js";import"./PrimaryButton-1c8fa329.js";function L({auth:C,groups:t,can:s,message:i,error:r}){var p,f,N,x,b,k,y,v;function I(d){if(confirm("Are you sure you want to delete?")){const n=document.querySelector('meta[name="csrf-token"]').content;fetch(route("group.destroy",d),{method:"DELETE",headers:{"X-CSRF-TOKEN":n}}).then(()=>{window.location.reload()})}}const[O,h]=c.useState(!1),[l,A]=c.useState(null),S=d=>{h(!0),A(d)},u=()=>{h(!1)};return c.useEffect(()=>{i&&E.success(i),r&&E.error(r)},[i,r]),a(F,{user:C.user,header:e("h2",{className:"font-medium text-lg lg:text-2xl",children:"Groups"}),addElement:s.create,searchField:!0,sortOptions:[{key:"id",label:"Id (Ascending)"},{key:"-id",label:"Id (Descending)"},{key:"name",label:"Name (A to Z)"},{key:"-name",label:"Name (Z to A)"}],filterOptions:[{key:"group",value:null},{key:"substream",value:null}],children:[e(w,{title:"Groups"}),e("div",{className:"pb-12",children:a("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e("div",{className:"admin-list",children:t.data.map((d,n)=>a("div",{className:"card-default",onClick:()=>S(n),children:[e("h5",{className:"form-text",children:d.name}),a("span",{children:["Updated at"," ",e(o,{inputDate:d.updated_at})]})]},n))}),e(j,{show:O,onClose:u,children:t.data[l]&&a("div",{className:"card-modal",children:[e("button",{className:"fixed right-4",onClick:u,children:e(m,{icon:"mdi:close"})}),a("div",{children:[e("span",{className:"form-label",children:"Name"}),e("h5",{className:"form-text",children:(p=t.data[l])==null?void 0:p.name})]}),(f=t.data[l])!=null&&f.stream?a(D,{children:[e("span",{className:"form-label",children:"Stream"}),a("h5",{className:"form-text",children:[(N=t.data[l])==null?void 0:N.stream.name,a("small",{children:["(",(x=t.data[l])==null?void 0:x.stream.course,"ะบ)"]})]})]}):null,(b=t.data[l])!=null&&b.substream?a(D,{children:[e("span",{className:"form-label",children:"Sub stream"}),e("h5",{className:"form-text",children:(k=t.data[l])==null?void 0:k.substream.name})]}):null,a("div",{className:"grid gap-1 m-auto",children:[a("span",{children:["Created at"," ",e(o,{inputDate:(y=t.data[l])==null?void 0:y.created_at})]}),a("span",{children:["Updated at"," ",e(o,{inputDate:(v=t.data[l])==null?void 0:v.updated_at})]})]}),s.edit&&a("a",{className:"admin-edit",href:route("group.edit",t.data[l].id),children:["Edit ",e(m,{icon:"mdi:pencil"})]}),s.delete&&a("button",{className:"admin-delete",onClick:()=>I(t.data[l].id),children:["Delete",e(m,{icon:"mdi:trash"})]})]})}),e(M,{pageContent:t})]})})]})}export{L as default};
