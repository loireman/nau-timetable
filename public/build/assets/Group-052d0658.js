import{r,j as t,a as G,g as P}from"./app-fdfe6fa4.js";import{A as T}from"./AuthenticatedLayout-58251d53.js";import{S as C,T as L,a as I}from"./SearchExtInput-5f62dc94.js";import{I as M}from"./InputSwitch-4aea0b21.js";import"./ApplicationLogo-8b18632e.js";import"./Dropdown-4a8f1190.js";import"./transition-99ac31e5.js";import"./iconify-a2e39cc2.js";function _({auth:g,group:h}){const[c,f]=r.useState([]),[o,w]=r.useState(h),[l,j]=r.useState(0),[u,v]=r.useState(0),[p,y]=r.useState(0),[d,S]=r.useState(0),[m,D]=r.useState(0);async function b(e){if(e!=""){const s=await P.get(`/api/v1/group/${e}`);s.data.data.timetables&&f(s.data.data.timetables)}}const N=()=>{var e=new Date(new Date().toLocaleString("en",{timeZone:"Europe/Rome"})),s=e.getDay(),a=e.getHours()*60+e.getMinutes(),n=0;if(a>525&&a<1275)for(a=a-525,n++;a>0;)a=a-110,n++;e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var x=new Date(e.getFullYear(),0,4),i=1+Math.round(((e.getTime()-x.getTime())/864e5-3+(x.getDay()+6)%7)/7);i=(i%2==(s==0)?1:0)+1,v(i-1),y(i),S(s),D(n)};r.useEffect(()=>{b(o),N()},[o]);const k=e=>{const s=new URL(window.location),a="group";w(e),s.searchParams.has(a)?s.searchParams.set(a,e):s.searchParams.append(a,e),window.history.pushState({},"",s);const n=new Event("urlchange");window.dispatchEvent(n)},E=e=>{j(e)};return t.jsxs(T,{user:g.user,children:[t.jsx(G,{title:"Timetable"}),t.jsxs("div",{className:"bg-white",children:[t.jsx("h1",{className:"px-6 py-2 text-2xl font-semibold",children:"Розклад групи"}),t.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 lg:gap-6 px-6 py-4 text-gray-900 w-full",children:[t.jsx("div",{className:"min-w-[190px] max-w-[260px] grid lg:gap-3",children:t.jsx(C,{suggestionsEndpoint:"/api/v1/search/group",onSearch:k,defaultValue:o,isFocused:!1})}),t.jsx("div",{className:"min-w-[190px] max-w-[260px] content-center grid lg:gap-3",children:t.jsxs("div",{className:"flex content-center items-center gap-4 justify-center",children:[t.jsx("span",{className:"font-semibold text-xl",children:"1"}),t.jsx(M,{initialValue:l,onChange:E}),t.jsx("span",{className:"font-semibold text-xl",children:"2"})]})})]}),t.jsx("div",{className:"grid px-6 text-gray-900 w-full gap-12 max-xl:hidden",children:t.jsx(L,{currentLesson:m,currentDay:d,currentWeek:p,selectedPGroup:l+1,timetable:c,weekDefault:u})}),t.jsx("div",{className:"grid px-6 text-gray-900 w-full gap-12 xl:hidden",children:t.jsx(I,{currentLesson:m,currentDay:d,currentWeek:p,selectedPGroup:l+1,timetable:c,weekDefault:u})})]})]})}export{_ as default};
