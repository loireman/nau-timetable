import{r as t,j as s,a as C,Q as a}from"./app-e9dc3a82.js";import{P as l}from"./PrimaryButton-ce25a64a.js";import{T as S}from"./TextInput-d073111b.js";import{A as E}from"./AdminLayout-2a431331.js";import{I as f}from"./iconify-e47a43cd.js";import"./ApplicationLogo-d31730a5.js";import"./Dropdown-fe1e7d95.js";import"./transition-87d577f1.js";import"./Modal-61380d4e.js";function R({auth:j}){var h;const[c,g]=t.useState(""),[n,N]=t.useState([]),[i,b]=t.useState([]),[d,p]=t.useState(!1),[x,m]=t.useState(!1),y=async(e,o)=>{e.preventDefault();try{response=await axios.post(route("timetable.store"),o)}catch(r){r.response?a.error(r.response.data.message):a.success("Предмет додано (хз)")}},v=async()=>{try{const e=await axios.post(route("api.parse.timetable"),{group:c});N(e.data),a.success("Розклад спизджено")}catch(e){a.error(e.response.data.error)}},w=async()=>{try{p(!0),(await axios.post(route("api.parse.dep"))).data.filter(r=>!i.includes(r)).forEach(async r=>{const k={name:r,short:r,chief:"-"};response=await axios.post(route("department.store"),k)}),a.success("Факультети спизджено")}catch(e){a.error(e),a.error(e.response.data.error)}finally{u(),p(!1)}},D=async()=>{try{m(!0);const e=await axios.post(route("api.parse.group"),{group:c});a.success("Групу спизджено")}catch(e){a.error(e),a.error(e.response.data.error)}finally{m(!1)}},u=async()=>{try{const e=await axios.get(route("api.fetch.dep"));b(e.data)}catch(e){a.error(e.response.data.error)}};return t.useEffect(()=>{u()},[]),s.jsxs(E,{user:j.user,header:s.jsx("h2",{className:"font-medium text-lg lg:text-2xl",children:"Dashboard"}),children:[s.jsx(C,{title:"Dashboard"}),s.jsx("div",{className:"pb-12",children:s.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:s.jsxs("div",{children:[s.jsx("div",{className:"p-6",children:"Ультимативний пиздер розкладу нау"}),s.jsxs("div",{className:"admin-list",children:[s.jsxs("div",{className:"card-default",children:[s.jsxs("h2",{className:"text-lg mb-1",children:["Кількість факультетів: ",i.length]}),s.jsx(l,{disabled:d,onClick:()=>w(),children:d?s.jsx(f,{icon:"svg-spinners:bars-scale",className:"w-6 h-6 mx-auto"}):s.jsx(s.Fragment,{children:"Спиздить факультети"})})]}),s.jsxs("div",{className:"card-default",children:[s.jsxs("h2",{className:"text-lg mb-1",children:["Назва групи,"," ",s.jsx("a",{href:"https://portal.nau.edu.ua/schedule/group/list",className:"text-blue-600 underline",target:"_blank",children:"переглянути тут"})]}),s.jsxs("div",{className:"flex flex-col gap-3 lg:grid lg:grid-cols-3",children:[s.jsx(S,{className:"col-span-1",name:"group",type:"text",label:"Group",value:c,onChange:e=>g(e.target.value)}),s.jsx(l,{className:"col-span-1",disabled:x,onClick:()=>D(),children:x?s.jsx(f,{icon:"svg-spinners:bars-scale",className:"w-6 h-6 mx-auto"}):s.jsx(s.Fragment,{children:"Спиздить групу"})}),s.jsx(l,{className:"col-span-1",onClick:()=>v(),children:"Спиздить розклад"})]})]}),n&&s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold p-4",children:["Розклад ",n.group]}),s.jsx("div",{className:"whitespace-pre-wrap",children:(h=n.lessons)==null?void 0:h.map((e,o)=>s.jsxs("div",{className:"card-default flex flex-col lg:flex-row lg:justify-between lg:items-center my-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[e.week," тиждень,"," ",["Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"][e.day-1],", ",e.lesson," пара"]}),s.jsx("p",{className:"text-lg font-semibold",children:e.name}),s.jsxs("p",{children:[["Лекція","Практичне","Лабораторна"][e.type],e.pgroup!==0&&s.jsxs("span",{children:[" - Підгрупа ",e.pgroup]})]}),s.jsx("p",{children:e.teacher}),s.jsx("p",{className:"text-sm",children:e.room})]}),s.jsx("div",{children:s.jsx(l,{className:"w-full",onClick:r=>y(r,e),children:"Додати"})})]},o))})]})]})]})})})]})}export{R as default};
