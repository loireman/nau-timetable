import{r as o,Q as N,j as e,a as C}from"./app-fdfe6fa4.js";import{A as D}from"./AdminLayout-6a32dd9e.js";import{D as r,P as I}from"./DateFormatted-a656848c.js";import{I as c}from"./iconify-a2e39cc2.js";import{M as w}from"./Modal-4b36877e.js";import"./ApplicationLogo-8b18632e.js";import"./Dropdown-4a8f1190.js";import"./transition-99ac31e5.js";import"./PrimaryButton-a47899af.js";function R({auth:k,timetables:s,can:n,message:i,error:l}){var h,p,u,j,f;function y(a){if(confirm("Are you sure you want to delete?")){const d=document.querySelector('meta[name="csrf-token"]').content;fetch(route("timetable.destroy",a),{method:"DELETE",headers:{"X-CSRF-TOKEN":d}}).then(()=>{window.location.reload()})}}const[E,m]=o.useState(!1),[t,g]=o.useState(null),v=a=>{m(!0),g(a)},x=()=>{m(!1)};return o.useEffect(()=>{i&&N.success(i),l&&N.error(l)},[i,l]),e.jsxs(D,{user:k.user,header:e.jsx("h2",{className:"font-medium text-lg lg:text-2xl",children:"Timetables"}),addElement:n.create,searchField:!0,sortOptions:[{key:"id",label:"Id (Ascending)"},{key:"-id",label:"Id (Descending)"},{key:"name",label:"Name (A to Z)"},{key:"-name",label:"Name (Z to A)"}],children:[e.jsx(C,{title:"Timetables"}),e.jsx("div",{className:"pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"admin-list",children:s.data.map((a,d)=>e.jsxs("div",{className:"card-default",onClick:()=>v(d),children:[e.jsxs("h5",{className:"form-text",children:[a.name,e.jsxs("small",{children:["(",a.week,"|",a.day,"|",a.lesson,")"]})]}),e.jsxs("span",{children:["Updated at"," ",e.jsx(r,{inputDate:a.updated_at})]})]},d))}),e.jsx(w,{show:E,onClose:x,children:s.data[t]&&e.jsxs("div",{className:"card-modal",children:[e.jsx("button",{className:"fixed right-4",onClick:x,children:e.jsx(c,{icon:"mdi:close"})}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Name"}),e.jsx("h5",{className:"form-text",children:(h=s.data[t])==null?void 0:h.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Course"}),e.jsx("h5",{className:"form-text",children:(p=s.data[t])==null?void 0:p.course})]}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Group"}),e.jsx("h5",{className:"form-text",children:(u=s.data[t])==null?void 0:u.group.name})]}),e.jsxs("div",{className:"grid gap-1 m-auto",children:[e.jsxs("span",{children:["Created at"," ",e.jsx(r,{inputDate:(j=s.data[t])==null?void 0:j.created_at})]}),e.jsxs("span",{children:["Updated at"," ",e.jsx(r,{inputDate:(f=s.data[t])==null?void 0:f.updated_at})]})]}),n.edit&&e.jsxs("a",{className:"admin-edit",href:route("timetable.edit",s.data[t].id),children:["Edit ",e.jsx(c,{icon:"mdi:pencil"})]}),n.delete&&e.jsxs("button",{className:"admin-delete",onClick:()=>y(s.data[t].id),children:["Delete",e.jsx(c,{icon:"mdi:trash"})]})]})}),e.jsx(I,{pageContent:s})]})})]})}export{R as default};
