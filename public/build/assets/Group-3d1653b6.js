import{r,j as t,a as G,f as P}from"./app-850d2a0e.js";import{A as T}from"./AuthenticatedLayout-05d15911.js";import{S as C,T as L,a as I}from"./SearchExtInput-0d63553c.js";import{I as M}from"./InputSwitch-3bf0b198.js";import"./ApplicationLogo-112399fd.js";import"./Dropdown-84783e80.js";import"./transition-9b158939.js";import"./iconify-bf2006e7.js";function _({auth:g,group:h}){const[c,f]=r.useState([]),[o,w]=r.useState(h),[l,j]=r.useState(0),[u,v]=r.useState(0),[p,y]=r.useState(0),[d,S]=r.useState(0),[m,D]=r.useState(0);async function b(e){if(e!=""){const a=await P.get(`/api/v1/group/${e}`);a.data.data.timetables&&f(a.data.data.timetables)}}const N=()=>{var e=new Date(new Date().toLocaleString("en",{timeZone:"Europe/Rome"})),a=e.getDay(),s=e.getHours()*60+e.getMinutes(),n=0;if(s>525&&s<1275)for(s=s-525,n++;s>0;)s=s-110,n++;e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var x=new Date(e.getFullYear(),0,4),i=1+Math.round(((e.getTime()-x.getTime())/864e5-3+(x.getDay()+6)%7)/7);i=(i%2==(a==0)?1:0)+1,v(i-1),y(i),S(a==0?a+1:a),D(n)};r.useEffect(()=>{b(o),N()},[o]);const k=e=>{const a=new URL(window.location),s="group";w(e),a.searchParams.has(s)?a.searchParams.set(s,e):a.searchParams.append(s,e),window.history.pushState({},"",a);const n=new Event("urlchange");window.dispatchEvent(n)},E=e=>{j(e)};return t.jsxs(T,{user:g.user,children:[t.jsx(G,{title:"Timetable"}),t.jsxs("div",{className:"bg-white",children:[t.jsx("h1",{className:"px-6 py-2 text-2xl font-semibold",children:"Розклад групи"}),t.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 lg:gap-6 px-6 py-4 text-gray-900 w-full",children:[t.jsx("div",{className:"min-w-[190px] max-w-[260px] grid lg:gap-3",children:t.jsx(C,{suggestionsEndpoint:"/api/v1/search/group",onSearch:k,defaultValue:o,isFocused:!1})}),t.jsx("div",{className:"min-w-[190px] max-w-[260px] content-center grid lg:gap-3",children:t.jsxs("div",{className:"flex content-center items-center gap-4 justify-center",children:[t.jsx("span",{className:"font-semibold text-xl",children:"1"}),t.jsx(M,{initialValue:l,onChange:E}),t.jsx("span",{className:"font-semibold text-xl",children:"2"})]})})]}),t.jsx("div",{className:"grid px-6 text-gray-900 w-full gap-12 max-xl:hidden",children:t.jsx(L,{currentLesson:m,currentDay:d,currentWeek:p,selectedPGroup:l+1,timetable:c,weekDefault:u})}),t.jsx("div",{className:"grid px-6 text-gray-900 w-full gap-12 xl:hidden",children:t.jsx(I,{currentLesson:m,currentDay:d,currentWeek:p,selectedPGroup:l+1,timetable:c,weekDefault:u})})]})]})}export{_ as default};
