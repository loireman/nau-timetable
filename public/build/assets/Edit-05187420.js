import{W as w,r as C,j as e,a as b}from"./app-de70be5c.js";import{T as n,I as u}from"./TextInput-9ca07de0.js";import{I as o}from"./InputLabel-dfe7d45c.js";import{P as F}from"./PrimaryButton-2667c952.js";import{A}from"./AdminLayout-3be14964.js";import{d as S}from"./index-b24286d1.js";import{S as c}from"./Select-6b62f8de.js";import{T}from"./TimetableSelect-6fa095a2.js";import"./ApplicationLogo-e40d29f1.js";import"./iconify-f8d34196.js";import"./Dropdown-1c72c9a6.js";import"./transition-daeef7ab.js";import"./Modal-1c13b810.js";function W({auth:x,timetable:r,groups:g,streams:h}){const{data:t,setData:s,post:I,processing:y,errors:l,reset:E,setError:d}=w({name:r.name,teacher:r.teacher,type:r.type,week:r.week,day:r.day,lesson:r.lesson,auditory:r.auditory,auditory_link:r.auditory_link,pgroup:r.pgroup,group_id:r.type!=0?r.group_id:null,stream_id:r.type==0?r.group_id:null}),f=a=>{a.preventDefault(),S.Inertia.put(route("timetable.update",{timetable:r}),t)},j=a=>{s("stream_id",a)},v=a=>{s("group_id",a)},m=a=>{s("type",a)},k=a=>/^https:\/\/meet\.google\.com\/[a-zA-Z]{3}-[a-zA-Z]{4}-[a-zA-Z]{3}/.test(a),N=a=>/^https:\/\/maps\.app\.goo\.gl\/[a-zA-Z0-9-]+$/.test(a),_=a=>{const{name:p,value:i}=a.target;s("auditory_link",a.target.value),i&&!k(i)&&!N(i)?d("auditory_link","Invalid Google Maps/Meet link format"):d("auditory_link","")};return C.useEffect(()=>{t.type==2?s("pgroup",1):s("pgroup",0)},[t.type]),e.jsxs(A,{user:x.user,header:e.jsx("h2",{className:"font-medium text-lg lg:text-2xl",children:"Timetable edit"}),children:[e.jsx(b,{title:"Timetable edit"}),e.jsx("div",{className:"pb-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{className:"px-4 py-8",onSubmit:f,children:[e.jsxs("div",{className:"mt-3 flex justify-around overflow-clip rounded-lg border bg-gray-100 border-gray-500",children:[e.jsx("div",{className:`${t.type==0?"bg-blue-600 text-white":""} w-1/3 p-3 text-center font-semibold rounded-md max-md:truncate overflow-hidden`,onClick:()=>m("0"),children:"Лекція"}),e.jsx("div",{className:`${t.type==1?"bg-blue-600 text-white":""} w-1/3 p-3 text-center font-semibold rounded-md max-md:truncate overflow-hidden`,onClick:()=>m("1"),children:"Практична"}),e.jsx("div",{className:`${t.type==2?"bg-blue-600 text-white":""} w-1/3 p-3 text-center font-semibold rounded-md max-md:truncate overflow-hidden`,onClick:()=>m("2"),children:"Лабораторна"})]}),t.type==0?e.jsxs(e.Fragment,{children:[e.jsx(o,{htmlFor:"name",value:"Stream"}),e.jsx(c,{options:h,defaultValue:"Виберіть поток",defaultSelectable:!1,value:t.stream_id,onChange:j})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{htmlFor:"name",value:"Group"}),e.jsx(c,{options:g,defaultValue:"Виберіть групу",defaultSelectable:!1,value:t.group_id,onChange:v})]}),t.type==0&&t.stream_id!=null||t.type!=0&&t.group_id!=null?e.jsxs(e.Fragment,{children:[t.type==2?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"mt-3",htmlFor:"pgroup",value:"Підгрупа"}),e.jsx(n,{id:"pgroup",name:"pgroup",type:"number",min:"1",max:"4",value:t.pgroup,className:"mt-1 block w-full",autoComplete:"pgroup",isFocused:!0,onChange:a=>s("pgroup",a.target.value),required:!0})]}):null,e.jsx(o,{htmlFor:"name",value:"Lesson name",required:!0}),e.jsx(n,{id:"name",name:"name",value:t.name,className:"mt-1 block w-full",autoComplete:"name",isFocused:!0,onChange:a=>s("name",a.target.value),required:!0}),e.jsx(u,{message:l.name,className:"mt-2"}),e.jsx(o,{className:"mt-3",htmlFor:"teacher",value:"Teacher"}),e.jsx(n,{id:"teacher",name:"teacher",value:t.teacher,className:"mt-1 block w-full",autoComplete:"teacher",isFocused:!0,onChange:a=>s("teacher",a.target.value)}),e.jsx(u,{message:l.teacher,className:"mt-2"}),e.jsx(o,{className:"mt-3",htmlFor:"auditory",value:"Auditory"}),e.jsx(n,{id:"auditory",name:"auditory",value:t.auditory,className:"mt-1 block w-full",autoComplete:"auditory",isFocused:!0,onChange:a=>s("auditory",a.target.value)}),e.jsx(u,{message:l.auditory,className:"mt-2"}),e.jsx(o,{className:"mt-3",htmlFor:"auditory_link",value:"Auditory Google Maps(Meet) link"}),e.jsx(n,{id:"auditory_link",name:"auditory_link",value:t.auditory_link,className:"mt-1 block w-full",autoComplete:"auditory_link",isFocused:!0,onChange:a=>_(a)}),e.jsx(u,{message:l.auditory_link,className:"mt-2"}),e.jsx(T,{data:t,setData:s}),e.jsx(u,{message:l.lesson,className:"mt-2"}),e.jsx(F,{className:"w-full grid mt-6",disabled:y,children:e.jsx("span",{className:"text-[1rem]",children:"Update"})})]}):null]})})})]})}export{W as default};
