import{r,j as s,a as b,f as k}from"./app-d4c680c1.js";import{A as E}from"./AuthenticatedLayout-a94ccb34.js";import{S as N,T as C,a as L}from"./SearchExtInput-aaf925c0.js";import"./ApplicationLogo-4fbafed9.js";import"./Dropdown-cd709d62.js";import"./transition-a4b65176.js";import"./InputSwitch-a8fa6063.js";import"./Modal-da30d3a9.js";import"./iconify-7077c9a1.js";function Y({auth:p,teacher:x}){const[o,g]=r.useState([]),[c,w]=r.useState(x),[l,f]=r.useState(0),[u,v]=r.useState(0),[m,j]=r.useState(0),[d,y]=r.useState(0);async function D(e){if(e!=""){const t=await k.get(`/api/v1/teacher/${e}`);t.data.data.timetables&&g(t.data.data.timetables)}}const T=()=>{var e=new Date(new Date().toLocaleString("en",{timeZone:"Europe/Rome"})),t=e.getDay(),a=e.getHours()*60+e.getMinutes(),i=0;if(a>525&&a<1275)for(a=a-525,i++;a>0;)a=a-110,i++;e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var h=new Date(e.getFullYear(),0,4),n=1+Math.round(((e.getTime()-h.getTime())/864e5-3+(h.getDay()+6)%7)/7);n=(n%2==(t==0)?1:0)+1,f(n-1),v(n),j(t==0?t+1:t),y(i)};r.useEffect(()=>{D(c),T()},[c]);const S=e=>{const t=new URL(window.location),a="teacher";w(e),t.searchParams.has(a)?t.searchParams.set(a,e):t.searchParams.append(a,e),window.history.pushState({},"",t);const i=new Event("urlchange");window.dispatchEvent(i)};return s.jsxs(E,{user:p.user,children:[s.jsx(b,{title:"Timetable"}),s.jsxs("div",{className:"bg-white",children:[s.jsx("h1",{className:"px-6 py-2 text-2xl font-semibold",children:"Розклад викладача"}),s.jsx("div",{className:"flex flex-wrap justify-center items-center gap-2 lg:gap-6 px-6 py-4 text-gray-900 w-full",children:s.jsx("div",{className:"min-w-[190px] max-w-[260px] grid lg:gap-3",children:s.jsx(N,{suggestionsEndpoint:"/api/v1/search/teacher",onSearch:S,defaultValue:c,isFocused:!1})})}),s.jsx("div",{className:"grid px-6 text-gray-900 w-full gap-12 max-xl:hidden",children:s.jsx(C,{currentLesson:d,currentDay:m,currentWeek:u,timetable:o,weekDefault:l,isTeacher:!0})}),s.jsx("div",{className:"grid px-6 text-gray-900 w-full gap-12 xl:hidden",children:s.jsx(L,{currentLesson:d,currentDay:m,currentWeek:u,timetable:o,weekDefault:l,isTeacher:!0})})]})]})}export{Y as default};
