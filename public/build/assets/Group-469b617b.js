import{r as n,j as t,a as W,f as L}from"./app-1bea036a.js";import{A as I}from"./AuthenticatedLayout-4bfab0db.js";import{S as M,T as R,a as _}from"./SearchExtInput-5d93ba8d.js";import{I as A}from"./InputSwitch-e37d096a.js";import"./ApplicationLogo-dfb9aa22.js";import"./Dropdown-68d6adfd.js";import"./transition-b0d6f065.js";import"./iconify-e02e257f.js";function B({auth:h,group:f}){const[u,w]=n.useState([]),[o,j]=n.useState(f),[c,v]=n.useState(0),[p,S]=n.useState(0),[d,y]=n.useState(0),[m,k]=n.useState(0),[x,D]=n.useState(0),[b,N]=n.useState(!1),[r,G]=n.useState(!1);async function E(e){if(e!=""){const s=await L.get(`/api/v1/group/${e}`);s.data.timetables&&(w(s.data.timetables),N(s.data.single_group),G(s.data.single_week))}}const P=()=>{var e=new Date(new Date().toLocaleString("en",{timeZone:"Europe/Rome"})),s=e.getDay(),a=e.getHours()*60+e.getMinutes(),i=0;if(a>525&&a<1275)for(a=a-525,i++;a>0;)a=a-110,i++;e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var g=new Date(e.getFullYear(),0,4),l=1+Math.round(((e.getTime()-g.getTime())/864e5-3+(g.getDay()+6)%7)/7);l=(l%2==(s==0)?1:0)+1,S(l-1),y(l),k(s==0?s+1:s),D(i)};n.useEffect(()=>{E(o),P()},[o]);const T=e=>{const s=new URL(window.location),a="group";j(e),s.searchParams.has(a)?s.searchParams.set(a,e):s.searchParams.append(a,e),window.history.pushState({},"",s);const i=new Event("urlchange");window.dispatchEvent(i)},C=e=>{v(e)};return t.jsxs(I,{user:h.user,children:[t.jsx(W,{title:"Timetable"}),t.jsxs("div",{className:"bg-white",children:[t.jsx("h1",{className:"px-6 py-2 text-2xl font-semibold",children:"Розклад групи"}),t.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 lg:gap-6 px-6 py-4 text-gray-900 w-full",children:[t.jsx("div",{className:"min-w-[190px] max-w-[260px] grid lg:gap-3",children:t.jsx(M,{suggestionsEndpoint:"/api/v1/search/group",onSearch:T,defaultValue:o,isFocused:!1})}),!b&&t.jsx("div",{className:"min-w-[190px] max-w-[260px] content-center grid lg:gap-3",children:t.jsxs("div",{className:"flex content-center items-center gap-4 justify-center",children:[t.jsx("span",{className:"font-semibold text-xl",children:"1"}),t.jsx(A,{initialValue:c,onChange:C}),t.jsx("span",{className:"font-semibold text-xl",children:"2"})]})})]}),t.jsx("div",{className:"grid px-6 text-gray-900 w-full gap-12 max-xl:hidden",children:t.jsx(R,{currentLesson:x,currentDay:m,currentWeek:r||d,selectedPGroup:c+1,timetable:u,weekDefault:r?!r:p,singleWeek:r})}),t.jsx("div",{className:"grid px-6 text-gray-900 w-full gap-12 xl:hidden",children:t.jsx(_,{currentLesson:x,currentDay:m,currentWeek:r||d,selectedPGroup:c+1,timetable:u,weekDefault:r?!r:p,singleWeek:r})})]})]})}export{B as default};
