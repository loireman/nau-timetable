import{r as c,Q as v,j as e,a as I}from"./app-dc1edb31.js";import{A,I as o}from"./AdminLayout-02a4912a.js";import{D as r,P as O}from"./DateFormatted-fd2bdc8b.js";import{M as w}from"./Modal-1fccd2b9.js";import"./ApplicationLogo-413d4455.js";import"./Dropdown-8e995e73.js";import"./transition-48bba27c.js";import"./PrimaryButton-46a599d1.js";function Z({auth:b,users:a,can:l,message:i,error:n}){var h,p,j,N,f,u;function k(s){if(confirm("Are you sure you want to delete?")){const d=document.querySelector('meta[name="csrf-token"]').content;fetch(route("user.destroy",s),{method:"DELETE",headers:{"X-CSRF-TOKEN":d}}).then(()=>{window.location.reload()})}}const[g,m]=c.useState(!1),[t,E]=c.useState(null),y=s=>{m(!0),E(s)},x=()=>{m(!1)};return c.useEffect(()=>{i&&v.success(i),n&&v.error(n)},[i,n]),e.jsxs(A,{user:b.user,header:e.jsx("h2",{className:"font-medium text-lg lg:text-2xl",children:"Користувачі"}),addElement:l.create,searchField:!0,sortOptions:[{key:"id",label:"Id (Ascending)"},{key:"-id",label:"Id (Descending)"},{key:"name",label:"Name (A to Z)"},{key:"-name",label:"Name (Z to A)"}],children:[e.jsx(I,{title:"Користувачі"}),e.jsx("div",{className:"pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"admin-list",children:a.data.map((s,d)=>e.jsxs("div",{className:"card-default flex",onClick:()=>y(d),children:[e.jsxs("div",{children:[e.jsx("h5",{className:"form-text",children:s.name}),e.jsxs("span",{children:["Updated at"," ",e.jsx(r,{inputDate:s.updated_at})]})]}),e.jsx("div",{className:"hidden lg:block flex-1",children:s.roles.length==0?e.jsx("div",{className:"options-block",children:e.jsx("div",{className:"chip",children:"No data"})}):e.jsx("div",{className:"options-block",children:s.roles.map((D,C)=>e.jsx("div",{className:"chip",children:D.name},C))})})]},d))}),e.jsx(w,{show:g,onClose:x,children:a.data[t]&&e.jsxs("div",{className:"card-modal",children:[e.jsx("button",{className:"fixed right-4",onClick:x,children:e.jsx(o,{icon:"mdi:close"})}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Name"}),e.jsx("h5",{className:"form-text",children:(h=a.data[t])==null?void 0:h.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Email"}),e.jsx("h5",{className:"form-text",children:(p=a.data[t])==null?void 0:p.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Roles"}),((j=a.data[t])==null?void 0:j.roles.length)==0?e.jsx("div",{className:"options-block",children:e.jsx("div",{className:"chip",children:"No data"})}):e.jsx("div",{className:"options-block",children:(N=a.data[t])==null?void 0:N.roles.map(s=>e.jsx("div",{className:"chip",children:s.name}))})]}),e.jsxs("div",{className:"grid gap-1 m-auto",children:[e.jsxs("span",{children:["Created at"," ",e.jsx(r,{inputDate:(f=a.data[t])==null?void 0:f.created_at})]}),e.jsxs("span",{children:["Updated at"," ",e.jsx(r,{inputDate:(u=a.data[t])==null?void 0:u.updated_at})]})]}),l.edit&&e.jsxs("a",{className:"admin-edit",href:route("user.edit",a.data[t].id),children:["Edit ",e.jsx(o,{icon:"mdi:pencil"})]}),l.delete&&e.jsxs("button",{className:"admin-delete",onClick:()=>k(a.data[t].id),children:["Delete",e.jsx(o,{icon:"mdi:trash"})]})]})}),e.jsx(O,{pageContent:a})]})})]})}export{Z as default};
