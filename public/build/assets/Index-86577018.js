import{r as l,Q as N,j as e,a as D}from"./app-8976dab0.js";import{A as w}from"./AdminLayout-4a23e310.js";import{D as c,P as C}from"./DateFormatted-c0160a44.js";import{I as p}from"./iconify-d35e3df8.js";import{M as I}from"./Modal-81006680.js";import"./ApplicationLogo-7b5920ec.js";import"./Dropdown-e7f3b791.js";import"./transition-eba5f43a.js";import"./PrimaryButton-9d699655.js";function R({auth:g,timetables:s,can:r,message:i,error:o}){var h,u,j,f;function y(a){if(confirm("Are you sure you want to delete?")){const t=document.querySelector('meta[name="csrf-token"]').content;fetch(route("timetable.destroy",a),{method:"DELETE",headers:{"X-CSRF-TOKEN":t}}).then(()=>{window.location.reload()})}}const[v,x]=l.useState(!1),[d,k]=l.useState(null),E=a=>{x(!0),k(a)},m=()=>{x(!1)};return l.useEffect(()=>{i&&N.success(i),o&&N.error(o)},[i,o]),e.jsxs(w,{user:g.user,header:e.jsx("h2",{className:"font-medium text-lg lg:text-2xl",children:"Timetables"}),addElement:r.create,searchField:!0,sortOptions:[{key:"id",label:"Id (Ascending)"},{key:"-id",label:"Id (Descending)"},{key:"name",label:"Name (A to Z)"},{key:"-name",label:"Name (Z to A)"}],children:[e.jsx(D,{title:"Timetables"}),e.jsx("div",{className:"pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"admin-list",children:s.data.map((a,t)=>e.jsxs("div",{className:"card-default",onClick:()=>E(t),children:[e.jsxs("div",{className:"flex gap-6 items-center",children:[e.jsx("h5",{className:"form-text",children:a.name}),a.groups&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"chip",children:["Лекція","Практична","Лабораторна"][a.type]}),a.groups.map(n=>e.jsxs("div",{className:"bg-gray-200 px-4 py-1 rounded-3xl",children:[n.name,a.type==2&&`/${a.pgroup}`," "]}))]})]}),e.jsxs("span",{children:[a.week," тиждень,"," ",["Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"][a.day-1],", ",a.lesson," пара"]}),e.jsxs("span",{children:["Updated at"," ",e.jsx(c,{inputDate:a.updated_at})]})]},t))}),e.jsx(I,{show:v,onClose:m,children:s.data[d]&&e.jsxs("div",{className:"card-modal",children:[e.jsx("button",{className:"fixed right-4",onClick:m,children:e.jsx(p,{icon:"mdi:close"})}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Name"}),e.jsx("h5",{className:"form-text",children:(h=s.data[d])==null?void 0:h.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Group"}),e.jsxs("h5",{className:"form-text flex flex-wrap gap-3",children:[(u=s.data[d])==null?void 0:u.groups.map(a=>{var t,n;return e.jsxs("div",{className:"bg-gray-200 px-4 py-1 rounded-3xl",children:[a.name,((t=s.data[d])==null?void 0:t.type)==2&&`/${(n=s.data[d])==null?void 0:n.pgroup}`]})})," "]})]}),e.jsxs("div",{className:"grid gap-1 m-auto",children:[e.jsxs("span",{children:["Created at"," ",e.jsx(c,{inputDate:(j=s.data[d])==null?void 0:j.created_at})]}),e.jsxs("span",{children:["Updated at"," ",e.jsx(c,{inputDate:(f=s.data[d])==null?void 0:f.updated_at})]})]}),r.edit&&e.jsxs("a",{className:"admin-edit",href:route("timetable.edit",s.data[d].id),children:["Edit ",e.jsx(p,{icon:"mdi:pencil"})]}),r.delete&&e.jsxs("button",{className:"admin-delete",onClick:()=>y(s.data[d].id),children:["Delete",e.jsx(p,{icon:"mdi:trash"})]})]})}),e.jsx(C,{pageContent:s})]})})]})}export{R as default};
