import{W as w,j as e,a as C}from"./app-39103341.js";import{I as n}from"./InputError-224a364a.js";import{I as o}from"./InputLabel-78f9f460.js";import{P as b}from"./PrimaryButton-060729d5.js";import{T as u}from"./TextInput-cc199105.js";import{A as F}from"./AdminLayout-50676e53.js";import{d as A}from"./index-31fea750.js";import{S as c}from"./Select-9e227373.js";import{T as S}from"./TimetableSelect-d68e175c.js";import"./ApplicationLogo-6719680e.js";import"./iconify-f720f908.js";import"./Dropdown-477af93e.js";import"./transition-6017fa6d.js";import"./Modal-033f7530.js";function W({auth:g,timetable:r,groups:x,streams:h}){const{data:a,setData:s,post:T,processing:y,errors:l,reset:I,setError:p}=w({name:r.name,teacher:r.teacher,type:r.type,week:r.week,day:r.day,lesson:r.lesson,auditory:r.auditory,auditory_link:r.auditory_link,pgroup:r.type==2?r.pgroup:1,group_id:r.type!=0?r.group_id:null,stream_id:r.type==0?r.group_id:null}),j=t=>{t.preventDefault();const i={name:a.name,teacher:a.teacher,type:a.type,week:a.week,day:a.day,lesson:a.lesson,auditory:a.auditory,auditory_link:a.auditory_link,pgroup:a.type==2?a.pgroup:0,group_id:a.group_id,stream_id:a.stream_id};A.Inertia.put(route("timetable.update",{timetable:r}),i)},f=t=>{s("stream_id",t)},v=t=>{s("group_id",t)},m=t=>{s("type",t)},k=t=>/^https:\/\/meet\.google\.com\/[a-zA-Z]{3}-[a-zA-Z]{4}-[a-zA-Z]{3}/.test(t),_=t=>/^https:\/\/maps\.app\.goo\.gl\/[a-zA-Z0-9-]+$/.test(t),N=t=>{const{name:i,value:d}=t.target;s("auditory_link",t.target.value),d&&!k(d)&&!_(d)?p("auditory_link","Invalid Google Maps/Meet link format"):p("auditory_link","")};return e.jsxs(F,{user:g.user,header:e.jsx("h2",{className:"font-medium text-lg lg:text-2xl",children:"Timetable edit"}),children:[e.jsx(C,{title:"Timetable edit"}),e.jsx("div",{className:"pb-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{className:"px-4 py-8",onSubmit:j,children:[e.jsxs("div",{className:"mt-3 flex justify-around overflow-clip rounded-lg border bg-gray-100 border-gray-500",children:[e.jsx("div",{className:`${a.type==0?"bg-blue-600 text-white":""} w-1/3 p-3 text-center font-semibold rounded-md max-md:truncate overflow-hidden`,onClick:()=>m("0"),children:"Лекція"}),e.jsx("div",{className:`${a.type==1?"bg-blue-600 text-white":""} w-1/3 p-3 text-center font-semibold rounded-md max-md:truncate overflow-hidden`,onClick:()=>m("1"),children:"Практична"}),e.jsx("div",{className:`${a.type==2?"bg-blue-600 text-white":""} w-1/3 p-3 text-center font-semibold rounded-md max-md:truncate overflow-hidden`,onClick:()=>m("2"),children:"Лабораторна"})]}),a.type==0?e.jsxs(e.Fragment,{children:[e.jsx(o,{htmlFor:"name",value:"Stream"}),e.jsx(c,{options:h,defaultValue:"Виберіть поток",defaultSelectable:!1,value:a.stream_id,onChange:f})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{htmlFor:"name",value:"Group"}),e.jsx(c,{options:x,defaultValue:"Виберіть групу",defaultSelectable:!1,value:a.group_id,onChange:v})]}),a.type==0&&a.stream_id!=null||a.type!=0&&a.group_id!=null?e.jsxs(e.Fragment,{children:[a.type==2?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"mt-3",htmlFor:"pgroup",value:"Підгрупа"}),e.jsx(u,{id:"pgroup",name:"pgroup",type:"number",min:"1",max:"4",value:a.pgroup,className:"mt-1 block w-full",autoComplete:"pgroup",isFocused:!0,onChange:t=>s("pgroup",t.target.value),required:!0})]}):null,e.jsx(o,{htmlFor:"name",value:"Lesson name",required:!0}),e.jsx(u,{id:"name",name:"name",value:a.name,className:"mt-1 block w-full",autoComplete:"name",isFocused:!0,onChange:t=>s("name",t.target.value),required:!0}),e.jsx(n,{message:l.name,className:"mt-2"}),e.jsx(o,{className:"mt-3",htmlFor:"teacher",value:"Teacher"}),e.jsx(u,{id:"teacher",name:"teacher",value:a.teacher,className:"mt-1 block w-full",autoComplete:"teacher",isFocused:!0,onChange:t=>s("teacher",t.target.value)}),e.jsx(n,{message:l.teacher,className:"mt-2"}),e.jsx(o,{className:"mt-3",htmlFor:"auditory",value:"Auditory"}),e.jsx(u,{id:"auditory",name:"auditory",value:a.auditory,className:"mt-1 block w-full",autoComplete:"auditory",isFocused:!0,onChange:t=>s("auditory",t.target.value)}),e.jsx(n,{message:l.auditory,className:"mt-2"}),e.jsx(o,{className:"mt-3",htmlFor:"auditory_link",value:"Auditory Google Maps(Meet) link"}),e.jsx(u,{id:"auditory_link",name:"auditory_link",value:a.auditory_link,className:"mt-1 block w-full",autoComplete:"auditory_link",isFocused:!0,onChange:t=>N(t)}),e.jsx(n,{message:l.auditory_link,className:"mt-2"}),e.jsx(S,{data:a,setData:s}),e.jsx(n,{message:l.lesson,className:"mt-2"}),e.jsx(b,{className:"w-full grid mt-6",disabled:y,children:e.jsx("span",{className:"text-[1rem]",children:"Update"})})]}):null]})})})]})}export{W as default};
