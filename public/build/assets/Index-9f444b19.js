import{r as o,Q as g,j as e,a as C}from"./app-5ef47a71.js";import{A as I}from"./AdminLayout-72c73764.js";import{D as c,P as w}from"./DateFormatted-ff84c928.js";import{I as l}from"./iconify-b6a78d45.js";import{M as A}from"./Modal-fa5bf682.js";import"./ApplicationLogo-7a1c63dd.js";import"./Dropdown-6e6642b1.js";import"./transition-5915506f.js";import"./PrimaryButton-a1398c67.js";function U({auth:y,timetables:s,can:i,message:n,error:r}){var x,h,u,j,f,N;function v(a){if(confirm("Are you sure you want to delete?")){const d=document.querySelector('meta[name="csrf-token"]').content;fetch(route("timetable.destroy",a),{method:"DELETE",headers:{"X-CSRF-TOKEN":d}}).then(()=>{window.location.reload()})}}const[k,m]=o.useState(!1),[t,E]=o.useState(null),D=a=>{m(!0),E(a)},p=()=>{m(!1)};return o.useEffect(()=>{n&&g.success(n),r&&g.error(r)},[n,r]),e.jsxs(I,{user:y.user,header:e.jsx("h2",{className:"font-medium text-lg lg:text-2xl",children:"Timetables"}),addElement:i.create,searchField:!0,sortOptions:[{key:"id",label:"Id (Ascending)"},{key:"-id",label:"Id (Descending)"},{key:"name",label:"Name (A to Z)"},{key:"-name",label:"Name (Z to A)"}],children:[e.jsx(C,{title:"Timetables"}),e.jsx("div",{className:"pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"admin-list",children:s.data.map((a,d)=>e.jsxs("div",{className:"card-default",onClick:()=>D(d),children:[e.jsxs("div",{className:"flex gap-6 items-center",children:[e.jsx("h5",{className:"form-text",children:a.name}),a.group&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"chip",children:["Лекція","Практична","Лабораторна"][a.type]}),e.jsxs("div",{className:"chip",children:[a.group.name,a.type==2&&`/${a.pgroup}`]})]})]}),e.jsxs("span",{children:[a.week," тиждень,"," ",["Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"][a.day-1],","," ",a.lesson," пара"]}),e.jsxs("span",{children:["Updated at"," ",e.jsx(c,{inputDate:a.updated_at})]})]},d))}),e.jsx(A,{show:k,onClose:p,children:s.data[t]&&e.jsxs("div",{className:"card-modal",children:[e.jsx("button",{className:"fixed right-4",onClick:p,children:e.jsx(l,{icon:"mdi:close"})}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Name"}),e.jsx("h5",{className:"form-text",children:(x=s.data[t])==null?void 0:x.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"form-label",children:"Group"}),e.jsxs("h5",{className:"form-text",children:[(h=s.data[t])==null?void 0:h.group.name,((u=s.data[t])==null?void 0:u.type)==2&&` (підгрупа ${(j=s.data[t])==null?void 0:j.pgroup})`]})]}),e.jsxs("div",{className:"grid gap-1 m-auto",children:[e.jsxs("span",{children:["Created at"," ",e.jsx(c,{inputDate:(f=s.data[t])==null?void 0:f.created_at})]}),e.jsxs("span",{children:["Updated at"," ",e.jsx(c,{inputDate:(N=s.data[t])==null?void 0:N.updated_at})]})]}),i.edit&&e.jsxs("a",{className:"admin-edit",href:route("timetable.edit",s.data[t].id),children:["Edit ",e.jsx(l,{icon:"mdi:pencil"})]}),i.delete&&e.jsxs("button",{className:"admin-delete",onClick:()=>v(s.data[t].id),children:["Delete",e.jsx(l,{icon:"mdi:trash"})]})]})}),e.jsx(w,{pageContent:s})]})})]})}export{U as default};
